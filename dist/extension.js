(()=>{"use strict";var e={197:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCommand=function(e){return`ssh -i ${e.identityFile} -p ${e.port} ${e.username}@${e.hostIp} -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ServerAliveInterval=60 -o ServerAliveCountMax=3`},t.getConfigString=function(e){return`\nHost google-cloud-shell\n    HostName ${e.hostIp}\n    User ${e.username}\n    IdentityFile ${e.identityFile}\n    Port ${e.port}\n    StrictHostKeyChecking no\n    UserKnownHostsFile=/dev/null\n    ServerAliveInterval 60\n    ServerAliveCountMax 3\n`.trim()}},265:function(e,t,o){var n,r=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[t.length]=o);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o=n(e),s=0;s<o.length;s++)"default"!==o[s]&&r(t,e,o[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){const t=c.commands.registerCommand("remote-cloud-shell.get-command-gcloud",(()=>{l(new a.GcloudConfigProvider)})),o=c.commands.registerCommand("remote-cloud-shell.add-host-gcloud",(()=>{!async function(e){await l(e),c.commands.executeCommand("opensshremotes.addNewSshHost")}(new a.GcloudConfigProvider)})),n=c.commands.registerCommand("remote-cloud-shell.update-config-gcloud",(()=>{!async function(e){await async function(e){await c.window.withProgress({location:c.ProgressLocation.Notification,title:"Fetching SSH Configuration...",cancellable:!1},(async(t,o)=>{const n=await e.getSshConfig();if(!n)return void c.window.showErrorMessage("Failed to extract SSH connection details.");const r=u.getConfigString(n);c.window.showInformationMessage(r,"Copy to Clipboard").then((e=>{"Copy to Clipboard"===e&&(c.env.clipboard.writeText(r),c.window.showInformationMessage("SSH configuration copied to clipboard."))}))}))}(e),c.commands.executeCommand("opensshremotes.openConfigFile")}(new a.GcloudConfigProvider)}));e.subscriptions.push(t),e.subscriptions.push(o),e.subscriptions.push(n)},t.deactivate=function(){};const c=s(o(398)),a=s(o(584)),u=s(o(197));async function l(e){await c.window.withProgress({location:c.ProgressLocation.Notification,title:"Fetching SSH Configuration...",cancellable:!1},(async(t,o)=>{const n=await e.getSshConfig();if(!n)return void c.window.showErrorMessage("Failed to extract SSH connection details.");const r=u.getCommand(n);c.window.showInformationMessage(r,"Copy to Clipboard").then((e=>{"Copy to Clipboard"===e&&(c.env.clipboard.writeText(r),c.window.showInformationMessage("SSH command copied to clipboard."))}))}))}},584:function(e,t,o){var n,r=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[t.length]=o);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o=n(e),s=0;s<o.length;s++)"default"!==o[s]&&r(t,e,o[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.GcloudConfigProvider=void 0;const c=s(o(398)),a=s(o(928)),u=o(317);t.GcloudConfigProvider=class{gcloudPath;constructor(){const e=c.workspace.getConfiguration("remote-cloud-shell");this.gcloudPath=e.get("gcloudPath","")}gcloud(){const e="gcloud";return this.gcloudPath?a.join(this.gcloudPath,e):e}async getSshConfig(){return this._getSshConfig()}_getSshConfig(){const e=`${this.gcloud()} cloud-shell ssh --authorize-session --dry-run`;console.debug(`Running command: ${e}`);let t=null;try{t=(0,u.execSync)(e,{encoding:"utf-8"})}catch(e){return c.window.showErrorMessage(`Failed to run gcloud command. Make sure you have gcloud SDK installed and authenticated. Error: ${e.message}`),null}const o=t.match(/(\S+)@(\d+\.\d+\.\d+\.\d+)/),n=t.match(/-i '([^']+)/),r=t.match(/-P (\d+)/);if(o&&n&&r){const e=o[1],t=o[2];let i=n[1].replace(/\.ppk$/,"");return i=i.replace(/\\/g,"/"),{username:e,hostIp:t,identityFile:i,port:parseInt(r[1],10)}}return null}}},398:e=>{e.exports=require("vscode")},317:e=>{e.exports=require("child_process")},928:e=>{e.exports=require("path")}},t={},o=function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(265);module.exports=o})();